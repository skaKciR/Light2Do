# Добавления Масок в Blazor
## Необходимость
Blazor - это новая технология от Microsoft, которая позволяет .NET-разработчикам создавать веб-приложения с использованием C# вместо JavaScript. Это означает, что разработчики могут использовать уже знакомый им язык программирования для создания веб-приложений, вместо того, чтобы изучать новый язык.

Однако, хотя Blazor может использовать C# для создания клиентской части веб-приложений, он не может полностью заменить JavaScript. Например, Blazor пока не может использоваться для изменения объектов DOM, что означает, что разработчики все еще должны использовать JavaScript для манипулирования веб-страницей.

## Подключение JavaScript к Blazor
Так как все таки использовать JavaScript совместно с Blazor ?
Рассмотрим решение данной проблемы на примере подключения библиотеки для добавления масок на поля ввода IMaskJS, которая предоставляет большой выбор различных вариантов массочного ввода.

Первым делом, подключим саму библиотеку. Сделать это можно несколькими способами, но проще всего будет использовать CDN. Добавляем в файл с импортами:

```html
<script src="https://unpkg.com/imask"></script>
```
Далее и будет происходить вся "магия". Нам необходимо подключить абстракцию IJSRuntime, которая обеспечивает взаимодействие между кодом C# и кодом JavaScript. Делается это следующим образом на странице Razor:

```csharp
@inject IJSRuntime jsRuntime
```
Теперь у нас появляется возможность вызывать код JS. Добавим поля для ввода, при этом указав у него id, который дальше будем использовать при вызове метода JS: 
```html
<div>
    <label class="form-label">Поле для ввода номера телефона</label>
    <input required type="text" id="maskedInput" class="form-control"/>
</div>
```
Теперь напишем код на JS, который благодаря ранее подключенной библиотеке IMask , будет добавлять определенную маску нашему элементу DOM. Делается это следующим образом:
```javascript
    function setMask(elementId, mask) {
        const element = document.getElementById(elementId);
        const maskOptions = {
            mask: mask
        };
        const maskInstance = IMask(element, maskOptions);

        return maskInstance;
    }
```
Когда функция установки маски написана, возвращаемся на страницу Razor и добавляем событие, которые будет вызывать функцию setMask благодаря ранее подключенной абстракции IJSRuntime.
```csharp
 protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await jsRuntime.InvokeVoidAsync("setMask", "maskedInput", "+{7}(000)000-00-00");
        }
    }
```
В данном примере в метод InvokeVoidAsync передаются следующие поля:
-setMask - функция JS , которую мы хотим вызвать
-maskedInput и +{7}(000)000-00-00 - параметры функции (elementId и сами параметры маски соответственно)

Готово. Теперь при переходе на страницу,после рендера у нас выполнится Task OnAfterRenderAsync, который в свою очередь вызовет скрипт JS, применяющий маску на наше поле ввода.

## Итог
Для связи между Blazor и JS предусмотрена абстракция IJSRuntime, позволяющая вызывать функции из JS прямо на странице Razor. В сокращенной версии подключение JS к Blazor выглядит так:
1. Инжектим IJSRuntime в страницу Razor.
2. Пишем саму функцию JS в отдельном файле.
3. Благодаря IJSRuntime вызываем на странице Razor эту самую функцию, передавая в неё все необходимые параметры.






